(this.webpackJsonpgame1=this.webpackJsonpgame1||[]).push([[0],{122:function(e,t,a){e.exports=a(172)},127:function(e,t,a){},128:function(e,t,a){},152:function(e,t,a){e.exports=a.p+"static/media/wh.59a4c6da.png"},153:function(e,t,a){e.exports=a.p+"static/media/UMPO.53770ec2.png"},172:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),s=a.n(o),c=(a(127),a(71)),i=a(19),l=a(20),u=a(9),p=a(22),d=a(21),m=(a(128),a(1)),h=(a(139),a(59)),f=a.n(h).a.initializeApp({apiKey:"AIzaSyCU3lAPlsxkBORPy2HQfCdayJNIIh0PrV4",authDomain:"game1-cae49.firebaseapp.com",databaseURL:"https://game1-cae49.firebaseio.com",projectId:"game1-cae49",storageBucket:"game1-cae49.appspot.com",messagingSenderId:"691468574984",appId:"1:691468574984:web:1c76454a2ec3020e820cbd",measurementId:"G-1B23MNQTH4"}),b=a(49),v=a.n(b),E=a(60),k=function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={id:t,warPoints:0,lastTaken:+new Date,points:[]},f.firestore().collection("users").doc(t.toString()).get().then((function(e){e.exists||f.firestore().collection("users").doc(t.toString()).set(a).then((function(e){console.log("\u0421\u041e\u0417\u0414\u0410\u041d \u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042c"),window.location.reload()}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=a(25),y=a.n(g),S=function(e){var t=null,a=[];return location.search.substr(1).split("&").forEach((function(n){(a=n.split("="))[0]===e&&(t=decodeURIComponent(a[1]))})),t},O=a(35),C=a(45),w=a.n(C),j=(a(152),a(50),a(153),["#DC143C","#FF0000","#8B0000","#FF69B4","#C71585","#FF7F50","#FF4500","#FFFF00","#BDB76B","#4B0082","#4169E1","#0000FF","#000080","#ADFF2F","#006400"]),P=function(e){if(console.log(e),!e.areas.length||!e.users.U1)return r.a.createElement(m.r,null);for(var t=e.polygons,a=[],n=0;n<t.length;n++){a[n]=[];for(var o=0;o<t[n].length;o++)a[n][o]={lat:0,lng:0},a[n][o].lat=t[n][o][0],a[n][o].lng=t[n][o][1]}return r.a.createElement(O.Map,{onReady:function(t,a){return e.removeIcons(t,a)},google:e.google,zoom:e.zoom,className:"map",streetViewControl:!1,mapTypeControl:!1,scaleControl:!1,fullscreenControl:!1,zoomControl:!1,onBoundsChanged:e.onDragged,initialCenter:e.center,onClick:e.clog},a.map((function(t,a){var n=0;return 0!==e.areas[a].owner&&(n=j[e.users["U"+e.areas[a].owner].color]),r.a.createElement(O.Polygon,{onClick:function(){e.polyClick(a)},paths:t,key:e.areas[a].owner+"poly"+t[0].lat+" "+t[1].lng+n,strokeColor:"#000000",strokeOpacity:.8,strokeWeight:.5,fillColor:0===e.areas[a].owner?"#000000":n,fillOpacity:.35})})))},_=["\u041f\u0438\u0432\u043a\u043e","\u0421\u0435\u043c\u043a\u0438","\u0421\u0438\u0436\u043a\u0438","\u0411\u0430\u043a-\u0431\u0435\u043b\u044f\u0448","\u0427\u0430\u043a-\u0427\u0430\u043a","\u042d\u0447\u043f\u043e\u0447\u043c\u0430\u043a\u0438","\u041e\u0447\u043a\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439","\u041e\u0447\u043a\u0438 \u0434\u0438\u0432\u0435\u0440\u0441\u0438\u0439","\u041e\u0447\u043a\u0438 \u043f\u0440\u043e\u043f\u0430\u0433\u0430\u043d\u0434\u044b","\u041e\u0447\u043a\u043e"],A=a(61),x=a.n(A),D=a(62),I=a.n(D),z=a(39),F=a.n(z),U=a(30),V=a.n(U),M=a(63),B=a.n(M),H=a(40),T=a.n(H),W=a(64),K=a.n(W),q=function(e){f.firestore().collection("data").doc("areas").update({main:e}).then((function(){console.log("\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u0435\u0440\u0440\u0438\u0442\u043e\u0440\u0438\u0439")}))},G=function(e){f.firestore().collection("data").doc("users").update({main:e}).then((function(){console.log("\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439")}))},L=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).takeArea=n.takeArea.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"takeArea",value:function(){var e=this.props.users,t=this.props.user,a=this.props.areas,n=this.props.curArea;a[n].owner=parseInt(S("vk_user_id")),a[n].happiness=50,a[n].approval=30,t.area.push(n),e["U".concat(S("vk_user_id"))]=t,q(a),G(e)}},{key:"render",value:function(){var e,t=this.props,a=t.areas[t.curArea],n=r.a.createElement(m.c,null,r.a.createElement(m.b,{onClick:this.takeArea,size:"xl"},"\u0417\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c \u0432\u043b\u0430\u0441\u0442\u044c"));return e=0===a.owner?{photo_200:"https://firebasestorage.googleapis.com/v0/b/game1-cae49.appspot.com/o/putin.jpg?alt=media&token=5362dd0d-512d-4987-8a26-1a433f8d132e",first_name:"\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440",last_name:"\u041f\u044b\u043d\u044f"}:t.users["U"+t.areas[t.curArea].owner],r.a.createElement(m.d,{header:r.a.createElement(m.e,{mode:"secondary"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f")},r.a.createElement(m.t,{before:r.a.createElement(m.a,{style:{objectFit:"cover"},size:48,src:e.photo_200}),after:t.areas[t.curArea].owner!==parseInt(S("vk_user_id"))&&0!==t.areas[t.curArea].owner?r.a.createElement(x.a,{onClick:function(){window.open("https://vk.me/id".concat(t.areas[t.curArea].owner))}}):"",description:"\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0440\u0430\u0439\u043e\u043d\u043e\u043c"},"".concat(e.first_name," ").concat(e.last_name)),r.a.createElement(m.t,{before:r.a.createElement(I.a,null),description:"\u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0441\u0447\u0430\u0441\u0442\u044c\u044f"},r.a.createElement(m.o,{key:a.name+"distrhappi"+a.happiness,value:a.happiness})),r.a.createElement(m.t,{before:r.a.createElement(K.a,null),description:"\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0432\u043b\u0430\u0441\u0442\u0438"},r.a.createElement(m.o,{key:a.name+"d_approval"+a.approval,value:a.approval})),r.a.createElement(m.t,{before:r.a.createElement(F.a,{width:28,height:28}),description:"\u0412\u0412\u041f",style:{display:"none"}},a.happiness*a.population/100),r.a.createElement(m.t,{style:{display:"none"},before:r.a.createElement(V.a,null),description:"\u0442\u0438\u043f \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438"},_[a.economy]),r.a.createElement(m.t,{style:{display:"none"},before:r.a.createElement(T.a,null),description:"\u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u044b"},"53"),r.a.createElement(m.t,{before:r.a.createElement(B.a,null),description:"\u043d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435"},a.population," \u0442\u044b\u0441."),0===a.owner?n:"")}}]),a}(r.a.Component),N=a(65),R=a.n(N),J=[{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]}],Q=[[[54.779493,56.124385],[54.779497,56.131224],[54.776341,56.131215],[54.776348,56.124403]],[[54.781021,56.124396],[54.781036,56.131236],[54.779497,56.131224],[54.779493,56.124385]],[[54.785005,56.124335],[54.785039,56.124738],[54.785051,56.125118],[54.785528,56.125112],[54.785721,56.125202],[54.785853,56.125454],[54.786095,56.126215],[54.786116,56.131269],[54.781036,56.131236],[54.781021,56.124396],[54.783463,56.12439]],[[54.788083,56.121598],[54.788085,56.131268],[54.786116,56.131269],[54.786095,56.126215],[54.785853,56.125454],[54.785721,56.125202],[54.785528,56.125112],[54.785051,56.125118],[54.785039,56.124738],[54.785005,56.124335],[54.785419,56.124109],[54.785716,56.123839],[54.786556,56.122793],[54.787478,56.121806]],[[54.788085,56.131268],[54.78809,56.138701],[54.787969,56.138726],[54.787872,56.138638],[54.787739,56.138423],[54.787534,56.138267],[54.787422,56.138271],[54.78731,56.138139],[54.787207,56.138088],[54.786705,56.138104],[54.786612,56.138182],[54.786502,56.138185],[54.786435,56.138273],[54.78132,56.138272],[54.781204,56.138015],[54.781135,56.137899],[54.781022,56.137387],[54.781036,56.131236]],[[54.776348,56.124403],[54.776341,56.131215],[54.775451,56.131214],[54.775371,56.131147],[54.775293,56.130954],[54.774989,56.130881],[54.774843,56.130696],[54.774628,56.130616],[54.773699,56.130516],[54.773455,56.131214],[54.773055,56.131289],[54.772976,56.13086],[54.772956,56.129272],[54.773206,56.127888],[54.773471,56.127201],[54.77381,56.126584],[54.774408,56.125915],[54.774385,56.12584],[54.774392,56.124427]],[[54.78011,56.116825],[54.780185,56.117445],[54.780169,56.124392],[54.774392,56.124427],[54.774246,56.12135],[54.773549,56.117302],[54.773503,56.116494],[54.773547,56.115505],[54.773647,56.114637],[54.773814,56.113825],[54.774018,56.113179],[54.774138,56.112975],[54.774406,56.112635],[54.7758,56.11359]],[[54.783401,56.121429],[54.783411,56.122845],[54.783463,56.12439],[54.780169,56.124392],[54.780179,56.121533],[54.780351,56.121501],[54.781185,56.12141],[54.78157,56.121394]],[[54.783423,56.11553],[54.783421,56.116032],[54.783406,56.116767],[54.783399,56.117089],[54.783412,56.118041],[54.78341,56.119827],[54.783401,56.121429],[54.78157,56.121394],[54.781185,56.12141],[54.780351,56.121501],[54.780179,56.121533],[54.780185,56.117445],[54.78011,56.116825],[54.780063,56.116583],[54.78005,56.115524]],[[54.780024,56.112637],[54.780035,56.113903],[54.78005,56.115524],[54.780063,56.116583],[54.78011,56.116825],[54.7758,56.11359],[54.774406,56.112635],[54.77439,56.111932],[54.774399,56.11172],[54.77444,56.111479],[54.774584,56.11101],[54.775041,56.109647],[54.774897,56.109436],[54.774889,56.109296],[54.774936,56.109133],[54.775397,56.108206],[54.775899,56.107353],[54.776538,56.106487],[54.777265,56.106672],[54.777663,56.106938],[54.777868,56.106967],[54.778242,56.106967],[54.778576,56.107238],[54.778652,56.107482],[54.778627,56.107721],[54.778875,56.108131],[54.778954,56.108587],[54.779057,56.109094],[54.779165,56.109505],[54.779291,56.110143],[54.77941,56.110763],[54.779543,56.111265],[54.779607,56.111497],[54.77977,56.11162],[54.779881,56.111878],[54.779988,56.11217]],[[54.785809,56.115501],[54.785955,56.118246],[54.786925,56.119222],[54.787296,56.119897],[54.787597,56.120338],[54.78766,56.120319],[54.78773,56.119954],[54.788112,56.120155],[54.788083,56.121598],[54.787478,56.121806],[54.786556,56.122793],[54.785716,56.123839],[54.785419,56.124109],[54.785005,56.124335],[54.783463,56.12439],[54.783411,56.122845],[54.783401,56.121429],[54.78341,56.119827],[54.783412,56.118041],[54.783399,56.117089],[54.783421,56.116032],[54.783423,56.11553],[54.784622,56.115512]],[[54.78458048922343,56.11139101942469],[54.78466091763425,56.10878927668024],[54.78222379251895,56.108698081573735],[54.78217429514853,56.11009283026148],[54.782694014516736,56.11004455049921],[54.78272185643726,56.110473703941594],[54.78271566934549,56.111412477096806],[54.78284250453815,56.11163241823603],[54.78335912182285,56.11161096056391],[54.78341480472905,56.11138565500666],[54.78418507706534,56.11136419733454]],[[54.78222379251895,56.108698081573735],[54.78154812943852,56.108228030268975],[54.780473542720735,56.108018817965814],[54.780167263515395,56.10829240328533],[54.77979910665372,56.10861963278515],[54.7794433216287,56.1087912941621],[54.779165,56.109505],[54.779291,56.110143],[54.77941,56.110763],[54.779543,56.111265],[54.779607,56.111497],[54.77977,56.11162],[54.779881,56.111878],[54.779988,56.11217],[54.780024,56.112637],[54.78039001225838,56.11210114008648],[54.78083859975408,56.111258926455804],[54.780866442951904,56.11106580740673],[54.780866442951904,56.109950008456536],[54.78125005839272,56.109960737292596],[54.78140474100889,56.109955372874566],[54.78151611212622,56.110009017054864],[54.78157798483668,56.11008948332531],[54.781878066139605,56.11010021216137],[54.78217429514853,56.11009283026148]],[[54.785809,56.115501],[54.78569326251932,56.115093615759456],[54.785535502974525,56.115088251341426],[54.7854860096572,56.114862945784175],[54.78549838299223,56.11465373348101],[54.7855231296509,56.11440697025164],[54.78539011618247,56.1141655714403],[54.785346809377394,56.11382761310443],[54.785223075393134,56.11355402778491],[54.785219982038655,56.112851289023006],[54.78458048922343,56.11139101942469],[54.78418507706534,56.11136419733454],[54.78341480472905,56.11138565500666],[54.78335912182285,56.11161096056391],[54.78337320718976,56.11200907539233],[54.783363926701156,56.11253478835925],[54.783277308705024,56.11254551719531],[54.78327112169821,56.11356475662097],[54.7831845035033,56.113645222891414],[54.78266788398799,56.113602307547175],[54.7825132062027,56.114380148161494],[54.782507019079,56.114589360464656],[54.7825132062027,56.11521163295611],[54.7825325632634,56.11552736140306],[54.783423,56.11553],[54.784622,56.115512]],[[54.78266788398799,56.113602307547175],[54.7831845035033,56.113645222891414],[54.78327112169821,56.11356475662097],[54.783277308705024,56.11254551719531],[54.783000275375684,56.11235063490257],[54.782728044315334,56.11233990606651],[54.78267545401296,56.112415007918926]],[[54.7825132062027,56.114380148161494],[54.78266788398799,56.113602307547175],[54.78267545401296,56.112415007918926],[54.782728044315334,56.11233990606651],[54.783000275375684,56.11235063490257],[54.783277308705024,56.11254551719531],[54.783363926701156,56.11253478835925],[54.78337320718976,56.11200907539233],[54.78335912182285,56.11161096056391],[54.78284250453815,56.11163241823603],[54.78271566934549,56.111412477096806],[54.78272185643726,56.110473703941594],[54.782694014516736,56.11004455049921],[54.78217429514853,56.11009283026148],[54.781878066139605,56.11010021216137],[54.78157798483668,56.11008948332531],[54.78151611212622,56.110009017054864],[54.78140474100889,56.109955372874566],[54.78125005839272,56.109960737292596],[54.780866442951904,56.109950008456536],[54.780866442951904,56.11106580740673],[54.78083859975408,56.111258926455804],[54.78039001225838,56.11210114008648],[54.780024,56.112637],[54.78020785233797,56.11262824961278],[54.78061390340649,56.11244585939977],[54.780843610491345,56.112412331787084],[54.780984373110826,56.112421719518636],[54.7810271514004,56.1120907444124],[54.78107355650313,56.1120371002321],[54.78111841471845,56.112055875695205],[54.78143087401066,56.1126137751703],[54.78144324858639,56.11268887702272],[54.78141849943111,56.112739838994],[54.78134115822329,56.11287663165376],[54.78132104948504,56.112938322461105],[54.78133961139765,56.11300805989549],[54.78142932718843,56.11316631022737],[54.7814834659314,56.11319313231752],[54.781549979145,56.11317703906343],[54.78159947727949,56.11318776789949],[54.78174023726838,56.113431848919845],[54.782100642479435,56.11396024409578],[54.78214859314528,56.11413190547273],[54.78219190337523,56.11422310057924],[54.78227543011632,56.114215053952194],[54.78239607954892,56.11430088464067]],[[54.78005,56.115524],[54.7825325632634,56.11552736140306],[54.7825132062027,56.11521163295611],[54.782507019079,56.114589360464656],[54.7825132062027,56.114380148161494],[54.78239607954892,56.11430088464067],[54.78227543011632,56.114215053952194],[54.78219190337523,56.11422310057924],[54.78214859314528,56.11413190547273],[54.782100642479435,56.11396024409578],[54.78174023726838,56.113431848919845],[54.78159947727949,56.11318776789949],[54.781549979145,56.11317703906343],[54.7814834659314,56.11319313231752],[54.78142932718843,56.11316631022737],[54.78133961139765,56.11300805989549],[54.78132104948504,56.112938322461105],[54.78134115822329,56.11287663165376],[54.78141849943111,56.112739838994],[54.78144324858639,56.11268887702272],[54.78143087401066,56.1126137751703],[54.78111841471845,56.112055875695205],[54.78107355650313,56.1120371002321],[54.7810271514004,56.1120907444124],[54.780984373110826,56.112421719518636],[54.780843610491345,56.112412331787084],[54.78061390340649,56.11244585939977],[54.78020785233797,56.11262824961278],[54.780024,56.112637],[54.780035,56.113903]],[[54.776538,56.106487],[54.77464932804316,56.10509820343463],[54.77348852221971,56.10926408840046],[54.77264068832039,56.112826061972235],[54.77317290729663,56.113078189619635],[54.773290489614574,56.113115740545844],[54.77375462700647,56.113823843725775],[54.773814,56.113825],[54.774018,56.113179],[54.774138,56.112975],[54.774406,56.112635],[54.77439,56.111932],[54.774399,56.11172],[54.77444,56.111479],[54.774584,56.11101],[54.775041,56.109647],[54.774897,56.109436],[54.774889,56.109296],[54.774936,56.109133],[54.775397,56.108206],[54.775899,56.107353]],[[54.77264068832039,56.112826061972235],[54.772589913349954,56.11424888369416],[54.7724754233254,56.11500526663636],[54.772305234852396,56.11557389494752],[54.772036026169616,56.117124211758124],[54.7718132314223,56.11852968928193],[54.771714211140804,56.11966694590424],[54.771788476374624,56.12095440623139],[54.77157186906159,56.12189854380463],[54.771395487964384,56.1237117170987],[54.7715223586558,56.123620521992194],[54.77156877466301,56.12329865691041],[54.77166779530045,56.123073351353156],[54.771797759519295,56.12293387648438],[54.771868930224166,56.12278367277955],[54.771940100803825,56.122579824894416],[54.77198342196494,56.1221989512143],[54.772036026169616,56.121383559673774],[54.77205041661652,56.12136491400017],[54.772093737659524,56.12112351518883],[54.77252075688693,56.12028130155815],[54.77255788878068,56.11999698740257],[54.77304369458419,56.11938007932915],[54.77317984293485,56.1192459688784],[54.77324172839732,56.11913331609978],[54.77377186165585,56.119422784150906],[54.77391705557004,56.11944053329866],[54.773549,56.117302],[54.773503,56.116494],[54.773547,56.115505],[54.773647,56.114637],[54.773814,56.113825],[54.77375462700647,56.113823843725775],[54.773290489614574,56.113115740545844],[54.77317290729663,56.113078189619635]],[[54.771395487964384,56.1237117170987],[54.77137257954564,56.12459186505538],[54.771125025691454,56.12599734257918],[54.77081558124374,56.12681809853774],[54.77039163850831,56.12811628770095],[54.76971393980054,56.12958613824111],[54.768302804698585,56.132418550960836],[54.76743099609072,56.133668089730726],[54.76697916515566,56.13453176103352],[54.76742171194417,56.13512721143483],[54.767848780479945,56.13556172929524],[54.768247992644056,56.135663653237806],[54.76879574246006,56.1350145586562],[54.769331106584005,56.13455858312367],[54.769595749023765,56.13476779542683],[54.76976981418925,56.135208345765484],[54.77011330625934,56.13557312619151],[54.770795852231196,56.1356645666147],[54.77097418889694,56.13563238010652],[54.77149405217942,56.13535343036897],[54.77174543606199,56.1351603113199],[54.77187230565609,56.135058387377335],[54.77217864767005,56.13469360695131],[54.772593288721794,56.13392113075502],[54.772738721516916,56.133518799402786],[54.77289653097977,56.13310037479646],[54.77306362268131,56.13200066910036],[54.773045056970766,56.13141058311708],[54.773055,56.131289],[54.772976,56.13086],[54.772956,56.129272],[54.773206,56.127888],[54.773471,56.127201],[54.77381,56.126584],[54.774408,56.125915],[54.774385,56.12584],[54.774392,56.124427],[54.774246,56.12135],[54.77391705557004,56.11944053329866],[54.77377186165585,56.119422784150906],[54.77324172839732,56.11913331609978],[54.77317984293485,56.1192459688784],[54.77304369458419,56.11938007932915],[54.77255788878068,56.11999698740257],[54.77252075688693,56.12028130155815],[54.772093737659524,56.12112351518883],[54.77205041661652,56.12136491400017],[54.772036026169616,56.121383559673774],[54.77198342196494,56.1221989512143],[54.771940100803825,56.122579824894416],[54.771868930224166,56.12278367277955],[54.771797759519295,56.12293387648438],[54.77166779530045,56.123073351353156],[54.77156877466301,56.12329865691041],[54.7715223586558,56.123620521992194]]],Y=function(e){return""},Z=a(41),$=a.n(Z),X=a(36),ee=a.n(X),te=a(66),ae=a.n(te),ne=a(67),re=a.n(ne),oe=a(42),se=a.n(oe),ce=function(e){var t=e.areas[e.curArea];if(0===t.owner)return"";var a=r.a.createElement(m.d,{header:r.a.createElement(m.e,{mode:"secondary"},"\u0412\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435")},r.a.createElement(m.t,{expandable:!0,before:r.a.createElement(T.a,null),onClick:function(){e.openPanel("trade")}},"\u0422\u043e\u0440\u0433\u043e\u0432\u043b\u044f"),r.a.createElement(m.t,{expandable:!0,before:r.a.createElement(ee.a,null)},"\u041f\u0440\u043e\u043f\u0430\u0433\u0430\u043d\u0434\u0430"),r.a.createElement(m.t,{expandable:!0,before:r.a.createElement(ae.a,null),onClick:function(){e.openPanel("diversion")}},"\u0414\u0438\u0432\u0435\u0440\u0441\u0438\u044f")),n=r.a.createElement(m.d,{header:r.a.createElement(m.e,{mode:"secondary"},"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435")},r.a.createElement(m.t,{expandable:!0,before:r.a.createElement($.a,null),onClick:function(){e.openPanel("laws")}},"\u0417\u0430\u043a\u043e\u043d\u044b"),r.a.createElement(m.t,{expandable:!0,before:r.a.createElement(re.a,null),onClick:function(){e.openPanel("production")}},"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u043e"),r.a.createElement(m.t,{expandable:!0,before:r.a.createElement(V.a,null),onClick:function(){e.openPanel("warehouse")}},"\u0421\u043a\u043b\u0430\u0434"),r.a.createElement(m.t,{expandable:!0,before:r.a.createElement(ee.a,null),onClick:function(){e.openPanel("speech")}},"\u0412\u044b\u0441\u0442\u0443\u043f\u0438\u0442\u044c \u0441 \u0440\u0435\u0447\u044c\u044e"),r.a.createElement(m.t,{expandable:!0,before:r.a.createElement(se.a,null),onClick:function(){e.openPanel("trade")}},"\u0413\u0430\u0440\u043d\u0438\u0437\u043e\u043d"));return t.owner===parseInt(S("vk_user_id"))?n:a},ie=(a(169),a(170),a(68)),le=a.n(ie),ue=a(43),pe=a.n(ue),de=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).colorUpdate=n.colorUpdate.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"colorUpdate",value:function(e){var t=this.props.users,a=this.props.user;a.color!==e&&(a.color=e,t["U".concat(S("vk_user_id"))]=a,G(t))}},{key:"render",value:function(){var e=this,t={flexShrink:0,width:80,height:80,display:"flex",flexDirection:"column",alignItems:"center"},a=this.props.user;return r.a.createElement(m.h,null,r.a.createElement(m.t,{before:r.a.createElement(m.a,{size:48,src:a.photo_200}),description:"\u043b\u0443\u0447\u0448\u0438\u0439 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0439?"},"".concat(a.first_name," ").concat(a.last_name)),r.a.createElement(m.e,{mode:"secondary"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0446\u0432\u0435\u0442"),r.a.createElement(m.f,null,r.a.createElement("div",{style:{display:"flex"}},j.map((function(n,o){return r.a.createElement("div",{onClick:function(){e.colorUpdate(o)},style:t},r.a.createElement(m.a,{style:{backgroundColor:n},size:64},o===a.color?r.a.createElement(pe.a,{fill:"#FFFFFF",width:24,height:24}):""))})))),r.a.createElement(m.t,{before:r.a.createElement(se.a,null),expandable:!0},"\u0412\u043e\u043e\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0441\u0438\u043b\u044b"),r.a.createElement(m.t,{before:r.a.createElement(le.a,null),expandable:!0},"\u0420\u0430\u0437\u0432\u0435\u0434\u043a\u0430"),r.a.createElement(m.t,{before:r.a.createElement($.a,null),expandable:!0},"\u041a\u043e\u043d\u0441\u0442\u0438\u0442\u0443\u0446\u0438\u044f"))}}]),a}(r.a.Component),me=a(31),he=a.n(me),fe=a(26),be=a.n(fe),ve=function(e){return r.a.createElement(m.v,{key:+new Date,layout:"vertical",onClose:function(){return e.closeSnackbar},before:r.a.createElement(m.a,{size:24,style:e.good?{backgroundColor:"var(--accent)"}:{backgroundColor:"var(--dynamic_red)"}},e.good?r.a.createElement(pe.a,{fill:"#fff",width:14,height:14}):r.a.createElement(be.a,{fill:"#fff",width:14,height:14}))},e.message)},Ee=function(){return parseInt(+new Date/1e3)},ke=function(e){return e<10&&(e="0".concat(e)),e},ge=function(e){return e>100&&(e=100),e<0&&(e=0),e},ye=function(e,t,a,n){return{type:e,num:t,date:Ee(),effect:{type:a,value:n},actor:S("vk_user_id")}},Se=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},Oe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).diversionOffset=600,n.prices=[50],n.state={snackbar:""},n.diversion=n.diversion.bind(Object(u.a)(n)),n.closeSnackbar=n.closeSnackbar.bind(Object(u.a)(n)),n.openSnackbar=n.openSnackbar.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"closeSnackbar",value:function(){this.setState({snackbar:null})}},{key:"openSnackbar",value:function(e,t){this.setState({snackbar:r.a.createElement(ve,{closeSnackbar:this.closeSnackbar,good:e,message:t})})}},{key:"diversion",value:function(e){var t=Ee(),a=this.props.user.lastDiversion,n=this.prices;if(t-a<this.diversionOffset)return this.openSnackbar(!1,"\u0414\u0438\u0432\u0435\u0440\u0441\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0440\u0430\u0437 \u0432 10 \u043c\u0438\u043d\u0443\u0442"),0;var r=this.props.areas,o=r[this.props.curArea],s=this.props.users,c=this.props.user;if(c.warehouse[7]-n[e]<0)return this.openSnackbar(!1,"\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043e\u0447\u043a\u043e\u0432 \u0434\u0438\u0432\u0435\u0440\u0441\u0438\u0438"),0;switch(e){case 0:if(Se(0,2)>0){var i=Se(1,5);o.happiness-=i,o.events.push(ye("diversion",0,"happiness",-i)),this.openSnackbar(!0,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0441\u0447\u0430\u0441\u0442\u044c\u044f \u0441\u043d\u0438\u0436\u0435\u043d \u043d\u0430 ".concat(i))}else this.openSnackbar(!1,"\u0414\u0438\u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0440\u043e\u0432\u0430\u043b\u0438\u043b\u0430\u0441\u044c")}o.happiness=ge(o.happiness),c.warehouse[7]-=n[e],r[this.props.curArea]=o,c.lastDiversion=Ee(),s["U"+S("vk_user_id")]=c,q(r),G(s)}},{key:"render",value:function(){var e=this,t=Ee(),a=this.props.user.lastDiversion,n=new Date(1e3*a+1e3*this.diversionOffset),o=ke(n.getMinutes()),s=ke(n.getHours());return r.a.createElement("div",null,r.a.createElement(m.j,{left:r.a.createElement(m.k,{onClick:function(){e.props.openPanel("area")}})},"\u0414\u0438\u0432\u0435\u0440\u0441\u0438\u0438"),r.a.createElement(m.d,{description:"\u0434\u0438\u0432\u0435\u0440\u0441\u0438\u0438 \u043c\u043e\u0433\u0443\u0442 \u0441\u043d\u0438\u0436\u0430\u0442\u044c \u043e\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0441\u0442\u0438 \u0438 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0441\u0447\u0430\u0441\u0442\u044c\u044f, \u043d\u043e \u0438 \u0441\u0430\u043c\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0435 \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043e\u0442 \u043d\u0438\u0445 \u0432\u044b\u0433\u043e\u0434\u0443, \u0441\u043f\u0438\u0441\u0430\u0432 \u0441\u0432\u043e\u0438 \u043d\u0435\u0443\u0434\u0430\u0447\u0438 \u043d\u0430 \u0432\u043d\u0435\u0448\u043d\u0435\u0435 \u0432\u043c\u0435\u0448\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e.\r \u0434\u0438\u0432\u0435\u0440\u0441\u0438\u0438 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0443\u044e\u0442\u0441\u044f \u0437\u0430 \u043e\u0447\u043a\u0438 \u0434\u0438\u0432\u0435\u0440\u0441\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u043d\u0430 \u0441\u0432\u043e\u0435\u043c \u0440\u0430\u0439\u043e\u043d\u0435 \u0438\u043b\u0438 \u043a\u0443\u043f\u0438\u0442\u044c \u043d\u0430 \u0442\u043e\u0440\u0433\u043e\u0432\u043e\u0439 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0435"},r.a.createElement(m.t,{multiline:!0,style:t-a>this.diversionOffset?{display:"none"}:{},before:r.a.createElement(be.a,{width:28,height:28})},"\u041d\u043e\u0432\u0430\u044f \u0434\u0438\u0432\u0435\u0440\u0441\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432 ".concat(s,":").concat(o)),r.a.createElement(m.t,{onClick:function(){e.diversion(0)},before:r.a.createElement(he.a,{width:28,height:28}),expandable:!0,description:"".concat(this.prices[0]," \u043e\u0447\u043a\u043e\u0432 \u0434\u0438\u0432\u0435\u0440\u0441\u0438\u0439")},"\u041f\u0435\u0440\u0435\u043a\u0443\u0441\u0438\u0442\u044c \u043a\u0430\u0431\u0435\u043b\u0438")),this.state.snackbar)}}]),a}(r.a.Component),Ce=a(69),we=a.n(Ce),je=function(e){var t=e.areas[e.curArea];if(0===t.owner)return"";var a={diversion:{name:"\u0414\u0438\u0432\u0435\u0440\u0441\u0438\u044f",icon:r.a.createElement(be.a,null),types:["\u043f\u0435\u0440\u0435\u0440\u0435\u0437\u0430\u0442\u044c \u043a\u0430\u0431\u0435\u043b\u0438"]},speech:{name:"\u0420\u0435\u0447\u044c",icon:r.a.createElement(ee.a,{width:24,height:24}),types:["\u0441\u0432\u0430\u043b\u0438\u0442\u044c \u0432\u0438\u043d\u0443 \u043d\u0430 \u0434\u0438\u0432\u0435\u0440\u0441\u0438\u0438"]}},n=["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u044f","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"];return r.a.createElement(m.d,{header:r.a.createElement(m.e,{mode:"secondary"},"\u0421\u043e\u0431\u044b\u0442\u0438\u044f")},t.events.length?t.events.reverse().map((function(e){var t=new Date(1e3*e.date),o=ke(t.getMinutes()),s=ke(t.getHours()),c="".concat(t.getDate()," ").concat(n[t.getMonth()]," ").concat(s,":").concat(o);return r.a.createElement(m.t,{before:a[e.type].icon,description:c},"".concat(a[e.type].name,": ").concat(a[e.type].types[e.num]))})):r.a.createElement(m.n,{icon:r.a.createElement(we.a,null),header:"\u0421\u043e\u0431\u044b\u0442\u0438\u0439 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"},"\u041a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u044d\u0442\u043e\u0439 \u0442\u0435\u0440\u0440\u0438\u0442\u043e\u0440\u0438\u0438 \u0447\u0442\u043e-\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0435\u0442,",r.a.createElement("br",null),"\u043e\u043d\u043e \u043e\u0442\u0440\u0430\u0437\u0438\u0442\u0441\u044f \u0437\u0434\u0435\u0441\u044c"))},Pe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).diversionOffset=1800,n.state={snackbar:""},n.diversion=n.diversion.bind(Object(u.a)(n)),n.closeSnackbar=n.closeSnackbar.bind(Object(u.a)(n)),n.openSnackbar=n.openSnackbar.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"closeSnackbar",value:function(){this.setState({snackbar:null})}},{key:"openSnackbar",value:function(e,t){this.setState({snackbar:r.a.createElement(ve,{closeSnackbar:this.closeSnackbar,good:e,message:t})})}},{key:"diversion",value:function(e){if(Ee()-this.props.user.lastSpeech<this.diversionOffset)return this.openSnackbar(!1,"\u0420\u0435\u0447\u044c \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043d\u043e\u0441\u0438\u0442\u044c \u0440\u0430\u0437 \u0432 30 \u043c\u0438\u043d\u0443\u0442"),0;var t=this.props.areas,a=t[this.props.curArea];switch(e){case 0:if(Se(0,4)>0){var n=Se(1,5);a.approval+=n,a.events.push(ye("speech",0,"approval",n)),this.openSnackbar(!0,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u043f\u043e\u0432\u044b\u0448\u0435\u043d \u043d\u0430 ".concat(n))}else this.openSnackbar(!1,"\u0420\u0435\u0447\u044c \u043d\u0438\u043a\u043e\u0433\u043e \u043d\u0435 \u0432\u043f\u0435\u0447\u0430\u0442\u043b\u0438\u043b\u0430")}a.approval=ge(a.approval),a.happiness=ge(a.happiness),t[this.props.curArea]=a;var r=this.props.users,o=this.props.user;o.lastSpeech=Ee(),r["U"+S("vk_user_id")]=o,q(t),G(r)}},{key:"render",value:function(){var e=this,t=Ee(),a=this.props.user.lastSpeech,n=new Date(1e3*a+1e3*this.diversionOffset),o=ke(n.getMinutes()),s=ke(n.getHours()),c=0!==this.props.areas[this.props.curArea].events.length;return c=!!c&&"diversion"===this.props.areas[this.props.curArea].events[this.props.areas[this.props.curArea].events.length-1].type,r.a.createElement("div",null,r.a.createElement(m.j,{left:r.a.createElement(m.k,{onClick:function(){e.props.openPanel("area")}})},"\u0412\u044b\u0441\u0442\u0443\u043f\u0438\u0442\u044c \u0441 \u0440\u0435\u0447\u044c\u044e"),r.a.createElement(m.d,{description:"\u043f\u0440\u043e\u0438\u0437\u043d\u0435\u0441\u0438\u0442\u0435 \u0432\u043e\u043e\u0434\u0443\u0448\u0435\u0432\u043b\u044f\u044e\u0449\u0443\u044e \u0440\u0435\u0447\u044c, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0434\u043d\u044f\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 \u0438 \u0443\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0432\u0430\u0448\u0438 \u043f\u043e\u0437\u0438\u0446\u0438\u0438, \u0430 \u043c\u043e\u0436\u0435\u0442 \u0438 \u043d\u0430\u043e\u0431\u043e\u0440\u043e\u0442. \u0432 \u043e\u0431\u0449\u0435\u043c, \u0441\u043b\u0435\u0434\u0438\u0442\u0435 \u0437\u0430 \u0431\u0430\u0437\u0430\u0440\u043e\u043c"},r.a.createElement(m.t,{multiline:!0,style:t-a>this.diversionOffset?{display:"none"}:{},before:r.a.createElement(be.a,{width:28,height:28})},"\u041f\u0440\u043e\u0438\u0437\u043d\u0435\u0441\u0442\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u0440\u0435\u0447\u044c \u043c\u043e\u0436\u043d\u043e \u0432 ".concat(s,":").concat(o)),r.a.createElement(m.t,{onClick:function(){e.diversion(0)},before:r.a.createElement(he.a,{width:28,height:28}),expandable:!0,style:c?{}:{display:"none"}},"\u0421\u0432\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u043d\u0430 \u0434\u0438\u0432\u0435\u0440\u0441\u0438\u0438")),this.state.snackbar)}}]),a}(r.a.Component),_e=a(44),Ae=a.n(_e),xe=a(32),De=a.n(xe),Ie=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).diversionOffset=1800,n.state={snackbar:""},n.diversion=n.diversion.bind(Object(u.a)(n)),n.closeSnackbar=n.closeSnackbar.bind(Object(u.a)(n)),n.openSnackbar=n.openSnackbar.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"closeSnackbar",value:function(){this.setState({snackbar:null})}},{key:"openSnackbar",value:function(e,t){this.setState({snackbar:r.a.createElement(ve,{closeSnackbar:this.closeSnackbar,good:e,message:t})})}},{key:"diversion",value:function(e){var t=this.props.areas,a=t[this.props.curArea];a.approval=ge(a.approval),a.happiness=ge(a.happiness),q(t)}},{key:"render",value:function(){var e=this,t=(new Date).getHours(),a=r.a.createElement(m.j,{left:r.a.createElement(m.k,{onClick:function(){e.props.openPanel("main")}})},"\u0417\u0430\u043a\u043e\u043d\u044b");return t>=12&&t<13?r.a.createElement("div",null,a,r.a.createElement(m.d,{description:"\u0437\u0430\u043a\u043e\u043d\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u044f \u0440\u0430\u0439\u043e\u043d\u0430. \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0438\u0445 \u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u0435 \u0431\u044b\u0441\u0442\u0440\u043e \u0432\u044b\u0432\u0435\u0434\u0435\u0442 \u043a \u0434\u043e\u043c\u0438\u043d\u0430\u0446\u0438\u0438."},r.a.createElement(m.p,{disabled:!0,multiline:!0,before:r.a.createElement(m.a,{size:72,src:"aye"}),after:r.a.createElement(De.a,null),actions:r.a.createElement(m.s,null,r.a.createElement("option",null,"a"),r.a.createElement("option",null,"y"),r.a.createElement("option",null,"e"))},"\u0412\u043e\u043e\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0441\u0438\u043b\u044b"),r.a.createElement(m.p,{disabled:!0,multiline:!0,before:r.a.createElement(m.a,{size:72,src:"aye"}),after:r.a.createElement(De.a,null),actions:r.a.createElement(m.s,null,r.a.createElement("option",null,"a"),r.a.createElement("option",null,"y"),r.a.createElement("option",null,"e"))},"\u0422\u043e\u0440\u0433\u043e\u0432\u043b\u044f"),r.a.createElement(m.p,{disabled:!0,multiline:!0,before:r.a.createElement(m.a,{size:72,src:"aye"}),after:r.a.createElement(De.a,null),actions:r.a.createElement(m.s,null,r.a.createElement("option",null,"a"),r.a.createElement("option",null,"y"),r.a.createElement("option",null,"e"))},"\u042d\u043a\u043e\u043b\u043e\u0433\u0438\u044f"),r.a.createElement(m.p,{disabled:!0,multiline:!0,before:r.a.createElement(m.a,{size:72,src:"aye"}),after:r.a.createElement(De.a,null),actions:r.a.createElement(m.s,null,r.a.createElement("option",null,"a"),r.a.createElement("option",null,"y"),r.a.createElement("option",null,"e"))},"\u0412\u043b\u0430\u0441\u0442\u044c"),r.a.createElement(m.p,{disabled:!0,multiline:!0,before:r.a.createElement(m.a,{size:72,src:"aye"}),after:r.a.createElement(De.a,null),actions:r.a.createElement(m.s,null,r.a.createElement("option",null,"a"),r.a.createElement("option",null,"y"),r.a.createElement("option",null,"e"))},"\u041f\u0440\u0430\u0432\u0430 \u0438 \u0441\u0432\u043e\u0431\u043e\u0434\u044b"),r.a.createElement(m.p,{disabled:!0,multiline:!0,before:r.a.createElement(m.a,{size:72,src:"aye"}),after:r.a.createElement(De.a,null),actions:r.a.createElement(m.s,null,r.a.createElement("option",null,"a"),r.a.createElement("option",null,"y"),r.a.createElement("option",null,"e"))},"\u0417\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u044c"),r.a.createElement(m.c,null,r.a.createElement(m.b,{size:"xl"},"\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u043a\u043e\u043d\u0441\u0442\u0438\u0442\u0443\u0446\u0438\u044e"))),this.state.snackbar):r.a.createElement("div",null,a,r.a.createElement(m.n,{icon:r.a.createElement(Ae.a,null),header:"\u0417\u0430\u043a\u0440\u044b\u0442\u043e"},"\u041f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0437\u0430\u043a\u043e\u043d\u044b \u043c\u043e\u0436\u043d\u043e \u0441 12 \u0434\u043e 13 \u0447\u0430\u0441\u043e\u0432"))}}]),a}(r.a.Component),ze=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={snackbar:""},n.diversion=n.diversion.bind(Object(u.a)(n)),n.closeSnackbar=n.closeSnackbar.bind(Object(u.a)(n)),n.openSnackbar=n.openSnackbar.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"closeSnackbar",value:function(){this.setState({snackbar:null})}},{key:"openSnackbar",value:function(e,t){this.setState({snackbar:r.a.createElement(ve,{closeSnackbar:this.closeSnackbar,good:e,message:t})})}},{key:"diversion",value:function(e){}},{key:"render",value:function(){var e=this,t=(new Date).getHours();return t>=8&&t<22?r.a.createElement("div",null,r.a.createElement(m.j,{left:r.a.createElement(m.k,{onClick:function(){e.props.openPanel("area")}})},"\u0422\u043e\u0440\u0433\u043e\u0432\u0430\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430"),r.a.createElement(m.d,{header:r.a.createElement(m.e,{mode:"secondary"},"\u041a\u0443\u043f\u0438\u0442\u044c")},_.map((function(t,a){return r.a.createElement(m.t,{key:"buy".concat(a),onClick:function(){e.diversion(a)},before:r.a.createElement(he.a,{width:28,height:28}),expandable:!0,description:"\u043c\u0438\u043d. \u0446\u0435\u043d\u0430 42"},t)}))),this.state.snackbar):r.a.createElement("div",null,r.a.createElement(m.j,{left:r.a.createElement(m.k,{onClick:function(){e.props.openPanel("area")}})},"\u0417\u0430\u043a\u0440\u044b\u0442\u043e"),r.a.createElement(m.n,{icon:r.a.createElement(Ae.a,null),header:"\u0417\u0430\u043a\u0440\u044b\u0442\u043e"},"\u0422\u043e\u0440\u0433\u043e\u0432\u0430\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 8 \u043f\u043e 22"))}}]),a}(r.a.Component),Fe=(a(171),a(70)),Ue=a.n(Fe),Ve=a(38),Me=a.n(Ve),Be=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).diversionOffset=1800,n.state={snackbar:"",sliderVal:1,selectVal:0},n.pushProduction=n.pushProduction.bind(Object(u.a)(n)),n.closeSnackbar=n.closeSnackbar.bind(Object(u.a)(n)),n.openSnackbar=n.openSnackbar.bind(Object(u.a)(n)),n.updateSelect=n.updateSelect.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"closeSnackbar",value:function(){this.setState({snackbar:null})}},{key:"openSnackbar",value:function(e,t){this.setState({snackbar:r.a.createElement(ve,{closeSnackbar:this.closeSnackbar,good:e,message:t})})}},{key:"diversion",value:function(e){var t=this.props.areas,a=t[this.props.curArea];a.approval=ge(a.approval),a.happiness=ge(a.happiness),q(t)}},{key:"pushProduction",value:function(){var e={count:this.state.sliderVal,type:parseInt(this.state.selectVal),ready:Ee()+this.state.sliderVal*[1,2,3,4,6,7,3,2,7,5][this.state.selectVal]*10},t=this.props.areas,a=t[this.props.curArea];a.production.length>=5?this.openSnackbar(!1,"\u0412\u0441\u0435 \u044f\u0447\u0435\u0439\u043a\u0438 \u0437\u0430\u043d\u044f\u0442\u044b"):(a.production.push(e),t[this.props.curArea]=a,q(t))}},{key:"collectProd",value:function(e){var t=this.props.areas,a=this.props.areas[this.props.curArea],n=this.props.users,r=this.props.user;a.warehouse[a.production[e].type]+a.production[e].count>15e3?this.openSnackbar(!1,"\u041d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 \u043d\u0435\u0442 \u043c\u0435\u0441\u0442\u0430"):(this.openSnackbar(!0,"\u041f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434"),r.warehouse[a.production[e].type]+=a.production[e].count,n["U"+S("vk_user_id")]=r,t[this.props.curArea].production.splice(e,1),q(t),G(n))}},{key:"updateSelect",value:function(e){this.setState({selectVal:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(m.j,{left:r.a.createElement(m.k,{onClick:function(){e.props.openPanel("area")}})},"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u043e"),r.a.createElement(m.d,{description:"\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0438 \u043f\u0440\u043e\u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0438\u0445 \u043d\u0430 \u0442\u043e\u0440\u0433\u043e\u0432\u043e\u0439 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0435"},r.a.createElement(m.c,null,r.a.createElement(m.u,{step:1,min:1,max:100,value:Number(this.state.sliderVal),onChange:function(t){e.setState({sliderVal:t})},top:"\u041a\u043e\u043b-\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u0430"}),r.a.createElement(m.g,{style:{margin:"15px 0"},value:this.state.sliderVal,disabled:!0}),r.a.createElement(m.s,{value:this.state.selectVal,onChange:this.updateSelect,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044e"},_.map((function(e,t){return r.a.createElement("option",{value:t},e)}))),r.a.createElement(m.b,{onClick:this.pushProduction,style:{marginTop:15},size:"xl"},"\u0412 \u043e\u0447\u0435\u0440\u0435\u0434\u044c"))),r.a.createElement(m.d,{header:r.a.createElement(m.e,{mode:"secondary"},"\u041e\u0447\u0435\u0440\u0435\u0434\u044c")},this.props.areas[this.props.curArea].production.map((function(t,a){var n,o,s;if(Ee()-t.ready<=0){n=r.a.createElement(Me.a,{width:28,height:28});var c=new Date(1e3*t.ready),i=ke(c.getMinutes()),l=ke(c.getHours());o="\u0431\u0443\u0434\u0435\u0442 \u0433\u043e\u0442\u043e\u0432\u043e \u0432 ".concat(l,":").concat(i),s=function(){return!1}}else n=r.a.createElement(Ue.a,null),o="\u043d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0431\u0440\u0430\u0442\u044c",s=function(){e.collectProd(a)};return r.a.createElement(m.t,{onClick:s,key:t.ready+o,description:o,before:n},"".concat(_[t.type]," (").concat(t.count,")"))}))),this.state.snackbar)}}]),a}(r.a.Component),He=function(e){return r.a.createElement("div",null,r.a.createElement(m.j,{left:r.a.createElement(m.k,{onClick:function(){e.openPanel("area")}})},"\u0421\u043a\u043b\u0430\u0434"),_.map((function(t,a){return r.a.createElement(m.t,{key:t,before:r.a.createElement(V.a,null),description:"".concat(e.user.warehouse[a],"/15000")},t)})))},Te=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={activeView:"main",activePanel:"main",VK_UID:0,userData:{id:0,warPoints:0,points:[]},popout:"",modal:"",snackbar:"",contextOpened:!1,center:{lat:54.77927,lng:56.123964},zoom:14,areas:[],users:[],activeArea:0},n.openPanel=n.openPanel.bind(Object(u.a)(n)),n.openCaptureModal=n.openCaptureModal.bind(Object(u.a)(n)),n.polyClick=n.polyClick.bind(Object(u.a)(n)),n.onDragged=n.onDragged.bind(Object(u.a)(n)),n.toggleContext=n.toggleContext.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({VK_UID:S("vk_user_id")}),y.a.send("VKWebAppInit",{}).then((function(){return console.log("\u0412\u041a \u041f\u041e\u0414\u041a\u041b\u042e\u0427\u0415\u041d")})).catch((function(){window.location.reload()})),k(S("vk_user_id")).then((function(){var t=f.firestore().collection("data");t.doc("areas").onSnapshot((function(t){t.data()&&e.setState({areas:t.data().main})})),t.doc("users").onSnapshot((function(t){if(t.data()){for(var a=t.data().main,n=[],r=0,o=Object.entries(a);r<o.length;r++){var s=Object(c.a)(o[r],2),i=s[0];s[1];n.push(i.substr(1))}var l=n.join(",");y.a.send("VKWebAppGetAuthToken",{app_id:7446907,scope:""}).then((function(t){return y.a.send("VKWebAppCallAPIMethod",{method:"users.get",request_id:"32test",params:{fields:"photo_200",user_ids:l,v:"5.110",access_token:t.access_token}}).then((function(t){for(var n,r=0;r<t.response.length;r++)n=t.response[r],a["U"+n.id].photo_200=n.photo_200,a["U"+n.id].first_name=n.first_name,a["U"+n.id].last_name=n.last_name,n.id,parseInt(S("vk_user_id"));e.setState({users:a})}))}))}}))}))}},{key:"componentWillUnmount",value:function(){}},{key:"openPanel",value:function(e){this.setState({activePanel:e})}},{key:"openView",value:function(e){this.setState({activeView:e})}},{key:"toggleContext",value:function(){this.setState({contextOpened:!this.state.contextOpened})}},{key:"removeIcons",value:function(e,t){t.setOptions({styles:J}),w()(".map").css("height",w()(window).height()-w()(".PanelHeader").height())}},{key:"openCaptureModal",value:function(e){}},{key:"onDragged",value:function(e,t){this.setState({center:{lat:t.center.lat(),lng:t.center.lng()},zoom:t.zoom})}},{key:"polyClick",value:function(e){this.openPanel("area"),this.setState({activeArea:e})}},{key:"clog",value:function(e,t,a){console.log("[".concat(a.latLng.lat(),", ").concat(a.latLng.lng(),"],"))}},{key:"render",value:function(){var e=this,t=this.state.users["U"+S("vk_user_id")],a=this.state.activeArea;return r.a.createElement(m.q,{activeView:this.state.activeView},r.a.createElement(m.w,{popout:this.state.popout,id:"main",activePanel:this.state.activePanel},r.a.createElement(m.i,{id:"main"},r.a.createElement(m.j,null,r.a.createElement(m.l,{aside:r.a.createElement(R.a,{style:{transform:"rotate(".concat(this.state.contextOpened?"180deg":"0",")")}}),onClick:this.toggleContext,before:"",status:""},"\u0411\u0418\u0422\u0412\u0410 \u0417\u0410 \u0418\u041d\u041e\u0420\u0421")),r.a.createElement(m.m,{opened:this.state.contextOpened,onClose:this.toggleContext},r.a.createElement(de,{areas:this.state.areas,polyClick:this.polyClick,users:this.state.users,user:t})),r.a.createElement(P,{clog:this.clog,areas:this.state.areas,users:this.state.users,center:this.state.center,removeIcons:this.removeIcons,google:this.props.google,points:this.state.points,markerClick:this.markerClick,zoom:this.state.zoom,polyClick:this.polyClick,onDragged:this.onDragged,polygons:Q}),this.state.snackbar),r.a.createElement(m.i,{id:"area"},this.state.areas.length?r.a.createElement("div",null,r.a.createElement(m.j,{left:r.a.createElement(m.k,{onClick:function(){e.openPanel("main")}})},this.state.areas[a].name),r.a.createElement(L,{user:t,users:this.state.users,areas:this.state.areas,curArea:a}),r.a.createElement(Y,{areas:this.state.areas,curArea:a}),r.a.createElement(ce,{openPanel:this.openPanel,areas:this.state.areas,curArea:a}),r.a.createElement(je,{areas:this.state.areas,curArea:a})):""),r.a.createElement(m.i,{id:"diversion"},r.a.createElement(Oe,{areas:this.state.areas,curArea:a,user:t,users:this.state.users,openPanel:this.openPanel})),r.a.createElement(m.i,{id:"speech"},r.a.createElement(Pe,{areas:this.state.areas,curArea:a,user:t,users:this.state.users,openPanel:this.openPanel})),r.a.createElement(m.i,{id:"laws"},r.a.createElement(Ie,{areas:this.state.areas,curArea:a,user:t,users:this.state.users,openPanel:this.openPanel})),r.a.createElement(m.i,{id:"trade"},r.a.createElement(ze,{areas:this.state.areas,curArea:a,user:t,users:this.state.users,openPanel:this.openPanel})),r.a.createElement(m.i,{id:"production"},r.a.createElement(Be,{areas:this.state.areas,curArea:a,user:t,users:this.state.users,openPanel:this.openPanel})),r.a.createElement(m.i,{id:"warehouse"},r.a.createElement(He,{user:t,openPanel:this.openPanel,areas:this.state.areas,curArea:a}))))}}]),a}(r.a.Component),We=Object(O.GoogleApiWrapper)({apiKey:"AIzaSyC2L8vPYtDn5Csq-7Gj9sZqSzvb3Bx1QfI"})(Te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(We,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e,t,a){e.exports=a.p+"static/media/pv.910d5316.png"}},[[122,1,2]]]);
//# sourceMappingURL=main.768a4483.chunk.js.map